{{/* layouts/shortcodes/gallery.html */}}
{{ $album := .Get "album" }}
{{ $images := resources.Match (printf "media/albums/%s/*" $album) }}

{{ if gt (len $images) 0 }}
<div class="w-full my-8">
  
  <div class="grid grid-cols-1 md:grid-cols-3 gap-5">
    {{ range $images }}
      
      {{ $image := .Fill "800x533 center" }}
      
      <div class="relative group overflow-hidden rounded-xl shadow-md hover:shadow-xl transition-all duration-300">
        <a href="{{ .RelPermalink }}" target="_blank" class="block w-full h-full">
          <img src="{{ $image.RelPermalink }}" 
               width="{{ $image.Width }}" 
               height="{{ $image.Height }}" 
               alt="{{ .Name }}" 
               loading="lazy"
               class="w-full h-full object-cover aspect-[3/2] transition-transform duration-500 group-hover:scale-105" />
        </a>
        
        <div class="absolute inset-0 bg-black opacity-0 group-hover:opacity-10 transition-opacity duration-300 pointer-events-none"></div>
      </div>
    {{ end }}
  </div>
</div>
{{ else }}
  <p class="text-red-500 text-center">Gallery Error: No images found in <code>assets/media/albums/{{ $album }}/</code></p>
{{ end }}
