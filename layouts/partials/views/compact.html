{{ $item := .item }}
{{ $link := $item.RelPermalink }}
{{ $target := "" }}
{{ if $item.Params.external_link }}
  {{ $link = $item.Params.external_link }}
  {{ $target = "target=\"_blank\" rel=\"noopener\"" }}
{{ end }}

{{/* è·å–å›¾ç‰‡ï¼šä¼˜å…ˆ featuredï¼Œå…¶æ¬¡æ‰‹åŠ¨æŒ‡å®šï¼Œå†æ¬¡è‡ªåŠ¨æŠ“å– */}}
{{ $resource := ($item.Resources.ByType "image").GetMatch "*featured*" }}
{{ $image := "" }}
{{ if $resource }}
  {{/* è£å‰ªä¸º 300x200 çš„ç¼©ç•¥å›¾ï¼Œä¿è¯å¤§å°ä¸€è‡´ */}}
  {{ $image = $resource.Fill "300x200 Center" }}
{{ else if $item.Params.image.filename }}
  {{ $imageResource := resources.Get (printf "media/%s" $item.Params.image.filename) }}
  {{ if $imageResource }}
     {{ $image = $imageResource.Fill "300x200 Center" }}
  {{ end }}
{{ end }}

<div class="group flex flex-col md:flex-row gap-6 py-6 border-b border-gray-100 dark:border-gray-700 last:border-0">
  <div class="flex-1 flex flex-col justify-start">
    <h3 class="text-xl font-bold mb-2">
      <a href="{{ $link }}" {{ $target | safeHTMLAttr }} class="text-gray-900 dark:text-gray-100 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors">
        {{ $item.Title }}
      </a>
    </h3>
    
    {{/* æ‘˜è¦ï¼šä¼˜å…ˆæ˜¾ç¤º summaryï¼Œå¦‚æœæ²¡æœ‰åˆ™æˆªå–æ­£æ–‡ */}}
    <div class="text-gray-600 dark:text-gray-300 mb-3 text-sm line-clamp-3">
      {{ if $item.Params.summary }}
        {{ $item.Params.summary | markdownify | emojify }}
      {{ else }}
        {{ $item.Summary | markdownify | emojify }}
      {{ end }}
    </div>

    <div class="flex items-center text-xs text-gray-500 dark:text-gray-400 space-x-4 mt-auto">
      {{ if not (eq $item.Params.show_date false) }}
      <span class="flex items-center">
        ğŸ“… {{ $item.Date | time.Format "Jan 2, 2006" }}
      </span>
      {{ end }}
      
      {{ if $item.Params.publication }}
      <span class="uppercase tracking-wider border px-1 rounded border-gray-200 dark:border-gray-600">
        ğŸ“– {{ $item.Params.publication | markdownify }}
      </span>
      {{ end }}
    </div>
  </div>

  {{ if $image }}
  <div class="w-full md:w-48 flex-shrink-0 mt-4 md:mt-0">
    <a href="{{ $link }}" {{ $target | safeHTMLAttr }} class="block overflow-hidden rounded-lg shadow-sm hover:shadow-md transition-shadow">
      <img src="{{ $image.RelPermalink }}" 
           width="{{ $image.Width }}" 
           height="{{ $image.Height }}"
           alt="{{ $item.Title }}" 
           loading="lazy"
           class="w-full h-48 md:h-32 object-cover transform group-hover:scale-105 transition-transform duration-500">
    </a>
  </div>
  {{ end }}
</div>
